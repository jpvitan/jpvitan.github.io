<p>
    Bubble sort is an elementary sorting algorithm that you could implement with just a few lines of code. It's a stable
    sorting algorithm with a quadratic runtime. In this post, we are going to analyze the time complexity of bubble sort
    and mathematically prove its runtime complexity of $O(n^2)$.
</p>

<pre>
<code class="language-python">
# Bubble sort implementation in Python
def bubble_sort(arr):
    for i in range(0, len(arr)):  # Outer loop
        for j in range(0, len(arr) - (i + 1)):  # Inner loop
            if arr[j] &gt; arr[j+1]:
                # Switch
                temp = arr[j]
                arr[j] = arr[j+1]
                arr[j+1] = temp
</code>
</pre>

<p>
    The code above is the usual implementation of bubble sort and as you could see, it has two loops that are nested.
    Those two nested loops should already give you a hint on why this algorithm is not suitable for sorting lists with
    large sizes.
</p>

<p>If we have a list with $n$ elements, then bubble sort will perform this number of comparisons:</p>

$$f(n)=\sum_{i=1}^{n-1} i$$

<p>
    This is very evident since bubble sort performs $(n-1)$ comparisons in the first iteration of the outer loop,
    $(n-2)$
    in the second iteration, $(n-3)$ in the third iteration, and so on. To make our analysis easier, we will simplify
    the sum above by using a well-known formula:
</p>

$$\sum_{i=1}^{n} i = \frac{n(n+1)}{2}$$

<p>This means that:</p>

$$f(n)=\sum_{i=1}^{n-1} i = \frac{n(n-1)}{2}$$

<p>
    The closed form of the sum tells us that bubble sort runs in quadratic time or $O(n^2)$ since the fastest growing
    term is $\frac{1}{2}n^2$:
</p>

$$\frac{n(n-1)}{2} = \frac{1}{2}n^2 - \frac{1}{2}n$$

<p>
    To make it more formal, let us try to prove that bubble sort is $O(n^2)$ using the definition that $f(n) \in
    O(g(n))$
    if:
</p>

$$\limsup_{n \to \infty} \frac{f(n)}{g(n)} \lt \infty$$

<p>
    Before we evaluate the limit, let us first simplify $f(n)/g(n)$:
</p>

$$
\begin{align}
\frac{f(n)}{g(n)} &= \frac{n(n-1)}{2n^2} \\[1.2ex]
& = \frac{n-1}{2n} \\[1.2ex]
& = \frac{1}{2} - \frac{1}{2n}
\end{align}
$$

<p>Evaluating the limit of $f(n)/g(n)$ as $n$ approaches infinity shows that $f(n) \in O(n^2)$:</p>

$$
\begin{align}
\limsup_{n \to \infty} \frac{f(n)}{g(n)} &= \limsup_{n \to \infty} \left(\frac{1}{2} - \frac{1}{2n}\right) \\[1.2ex]
& = \frac{1}{2} - \limsup_{n \to \infty} \frac{1}{2n} \\[1.2ex]
& = \frac{1}{2} - 0 \\[1.2ex]
& = \frac{1}{2}
\end{align}
$$

<p>
    Sorting algorithms that run on quadratic time are usually not very efficient. If you are sorting large arrays
    with bubble sort, you should consider changing your algorithm to more efficient ones like quicksort or
    mergesort.
</p>

<p>
    I've included a video below by Viktor Bohush that compares bubble sort with other sorting algorithms. I highly
    recommend that you watch it to visualize how poorly bubble sort performs on all sorting tasks.
</p>

<div class="iframe-container mb-4">
    <iframe width="1280" height="720" src="https://www.youtube.com/embed/ZZuD6iUe3Pc"
        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
        title="Visualization and Comparison of Sorting Algorithms" allowfullscreen></iframe>
</div>